From d91628259edcfcaee1ef4400b190acf8774ce29a Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Jani=20V=C3=A4limaa?= <wally@mageia.org>
Date: Sat, 11 Apr 2020 17:58:06 +0300
Subject: [PATCH] Change default --runstatedir location to /run

---
 doc/autoconf.texi       | 5 ++---
 lib/autoconf/general.m4 | 4 ++--
 2 files changed, 4 insertions(+), 5 deletions(-)

diff --git a/doc/autoconf.texi b/doc/autoconf.texi
index 436c987..60eb759 100644
--- a/doc/autoconf.texi
+++ b/doc/autoconf.texi
@@ -2800,8 +2800,7 @@ The directory for installing temporary modifiable single-machine data.
 Content in this directory survives as long as the process is running
 (such as pid files), as contrasted with @file{/tmp} that may be
 periodically cleaned.  Conversely, this directory is typically cleaned
-on a reboot.  By default, this is a subdirectory of
-@code{localstatedir}.
+on a reboot.  By default, this directory is @file{/run}.
 @end defvar
 
 @defvar mandir
@@ -22584,7 +22583,7 @@ test "$prefix" = NONE && prefix=/usr/share/local/gnu
 test "$exec_prefix" = NONE && exec_prefix=/usr/local/gnu
 test "$sharedstatedir" = '$@{prefix@}/com' && sharedstatedir=/var
 test "$localstatedir" = '$@{prefix@}/var' && localstatedir=/var
-test "$runstatedir" = '$@{localstatedir@}/run' && runstatedir=/run
+test "$runstatedir" = NONE && runstatedir=/run
 
 # Give Autoconf 2.x generated configure scripts a shared default
 # cache file for feature test results, architecture-specific.
diff --git a/lib/autoconf/general.m4 b/lib/autoconf/general.m4
index 1437c0c..7a8ee0a 100644
--- a/lib/autoconf/general.m4
+++ b/lib/autoconf/general.m4
@@ -586,7 +586,7 @@ AC_SUBST([datadir],        ['${datarootdir}'])dnl
 AC_SUBST([sysconfdir],     ['${prefix}/etc'])dnl
 AC_SUBST([sharedstatedir], ['${prefix}/com'])dnl
 AC_SUBST([localstatedir],  ['${prefix}/var'])dnl
-AC_SUBST([runstatedir],    ['${localstatedir}/run'])dnl
+AC_SUBST([runstatedir],    ['/run'])dnl
 AC_SUBST([includedir],     ['${prefix}/include'])dnl
 AC_SUBST([oldincludedir],  ['/usr/include'])dnl
 AC_SUBST([docdir],         [m4_ifset([AC_PACKAGE_TARNAME],
@@ -1068,7 +1068,7 @@ Fine tuning of the installation directories:
   --sysconfdir=DIR        read-only single-machine data [PREFIX/etc]
   --sharedstatedir=DIR    modifiable architecture-independent data [PREFIX/com]
   --localstatedir=DIR     modifiable single-machine data [PREFIX/var]
-  --runstatedir=DIR       modifiable per-process data [LOCALSTATEDIR/run]
+  --runstatedir=DIR       modifiable per-process data [/run]
   --libdir=DIR            object code libraries [EPREFIX/lib]
   --includedir=DIR        C header files [PREFIX/include]
   --oldincludedir=DIR     C header files for non-gcc [/usr/include]
-- 
2.26.0
